<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
    <!-- https://github.com/michalsnik/aos -->
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <!-- Custom CSS -->
    <link rel="stylesheet" href="./main.css" type="text/css">

    <!-- {% if title %}
        <title>CodeWithPrince-{{title}}</title>
    {% else %}
        <title>CodeWithPrince</title>
    {% endif %} -->

</head>
<!-- <body style = 'background-color: black;'> -->
<body class = "day-night" id = "day-night">
    <div class="row">
    </div>

    <!-- BLOCK WHERE THERE IS THE REAL INDEX.HTML CONTENT -->
    <div class="row p-4">
        <div class="h2" style = "text-align: center;">
            WAVE CLIMATE SWELL SYSTEMS
        </div>
        <div class="card m-auto day-night">
            <div class="card-body day-night">
                <div id="chart1"></div>
                <!---------------- LOADING THE SCRIPTS ----------------------->
                <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
                <!-- --------------SWITCH BUTTON------------------ -->
                <script>
                    // Function to add the "holding" class to existing buttons
                    function addHoldingClassToButtons() {
                        const existingButtons = document.querySelectorAll('.existing-button');
                        existingButtons.forEach(button => {
                            button.classList.add('holding');
                        });
                    }
                </script>
                <script>
                    // Function to remove the "holding" class from existing buttons
                    function removeHoldingClassFromButtons() {
                        const existingButtons = document.querySelectorAll('.existing-button');
                        existingButtons.forEach(button => {
                            button.classList.remove('holding');
                        });
                    }
                </script>
                <script>
                    // Function to toggle the "holding" class based on the switch state
                    function toggleHoldingClass() {
                        const switchCheckbox = document.getElementById('holdSwitch');
                        
                        if (switchCheckbox.checked) {
                            addHoldingClassToButtons();
                        } else {
                            removeHoldingClassFromButtons();
                        }
                    }
                    // Get the checkbox element
                    const switchCheckbox = document.getElementById('holdSwitch');
                    // Add a change event listener to the checkbox
                    switchCheckbox.addEventListener('change', toggleHoldingClass);
                </script>
                <!-- --------------END SWITCH BUTTON------------------ -->
                <!--------------PLOT PLOTLY WITH JS --------------------->
                <script>
                    // Asynchronous function to load JSON file
                    function loadJSONFile(filePath) {
                        return fetch(filePath)
                            .then(response => {
                                if (!response.ok) {
                                    throw new Error(`Failed to load JSON file: ${response.status} ${response.statusText}`);
                                }
                                return response.json();
                            })
                            .catch(error => {
                                console.error('Error loading JSON file:', error);
                            });
                    };
                </script>
                <script>
                    let graphs1;
                    function loadJSONAndStore(filePath) {
                    return loadJSONFile(filePath)
                        .then(data => {
                            graphs1 = data; // Assign the JSON data to the global variable
                            return data; // Return the JSON data
                        })
                        .catch(error => {
                            console.error('Error:', error);
                        });
                    }
                </script>
                <script>
                    let activeButton = null;
                    function myFunction(jsonFilePath, buttonElement) {
                        // Remove the active class from the previously active button
                        if (activeButton) {
                            activeButton.classList.remove('active');
                        }
                        
                        // If a buttonElement is provided, add the active class to it
                        if (buttonElement) {
                            buttonElement.classList.add('active');
                            activeButton = buttonElement;
                        }

                        const switchCheckbox = document.getElementById('holdSwitch');
                        if (!switchCheckbox.checked) { // Use ! to check if it's not checked
                            loadJSONAndStore('./jsons_plotly/sum_99/scatter.json');
                        }
                        let dataj;
                        loadJSONFile(jsonFilePath)
                            .then(data => {
                                if (data) {
                                    dataj = data;
                                    console.log('JSON data loaded:', dataj);
                                }
                                Plotly.purge(chart1);
                                Plotly.newPlot("chart1", graphs1.data, dataj.layout);
                                Plotly.plot("chart1", dataj.data, dataj.layout,
                                
                                // custom button
                                // {
                                // modeBarButtonsToAdd: [{
                                //     name: 'custom button',
                                //     icon: Plotly.Icons['coffee'],
                                //     click: function() {
                                //         console.log('hello world');     
                                //     }}]}
                                    
                                    );
                            })
                            .catch(error => {
                                console.error('Error:', error);
                            });
                    };
                </script>
                <script>
                    function myFunction_reset_view(jsonFilePath,buttonElement) {
                        // Remove the active class from the previously active button
                        if (activeButton) {
                            activeButton.classList.remove('active');
                        }
                        loadJSONFile(jsonFilePath)
                            .then(data => {
                                if (data) {
                                    dataj = data;
                                    console.log('JSON data loaded:', dataj);
                                }
                                Plotly.purge(chart1);
                                Plotly.newPlot("chart1", dataj, {});
                            })
                            .catch(error => {
                                console.error('Error:', error);
                            });
                    };
                </script>
                <div class="card-body">
                    <div class="row p-4">
                        <script>
                            loadJSONAndStore('./jsons_plotly/sum_99/scatter.json')
                            myFunction_reset_view('./jsons_plotly/sum_99/scatter.json',{});
                        </script> 
                    </div>
                </div>
                <!-------------- PLOT PLOTLY WITH JS --------------------->
                <!--------------- END LOAD THE SCRIPTS ------------->
                <div class="row p-10">
                    <div class="h3">
                        Swell wave systems quiver plot
                    </div>
                    <div class="row p-4">
                        <p class="card-text day-night" style="padding-top: 0.5rem;">
                            To see the quiver plot information of each swell wave system select one of the world region first.
                            Once the arrows (quiver plot) appear, a colorbar is loaded on the left and a zoom over the interested region is applied.
                            The meaning of the arrows are:
                            <ul style="margin-left: 3rem">
                                <li>Color: identifies the relative energy (%) of each swell wave system, the colorbar show the intensity;</li>
                                <li>Size: represents the mean Tp;</li>
                                <li>Direction: represents the mean MWD.</li>
                            </ul>
                        <!-- 
                            When \(a \ne 0\), there are two solutions to \(ax^2 + bx + c = 0\) and they are
                        \[x = {-b \pm \sqrt{b^2-4ac} \over 2a}.\] -->
                        </p>
                    </div>
                </div>
                <div class="container p-20" style="justify-content: center; display:flex; flex-wrap: wrap;">
                    <button onclick="myFunction('./jsons_plotly/sum_99/Africa.json',this)" type="button" class="btn btn-outline-primary" id="btnAfr">Africa</button>
                    <button onclick="myFunction('./jsons_plotly/sum_99/Europe.json',this)" type="button" class="btn btn-outline-primary" id="btnEUr">Europe</button>
                    <button onclick="myFunction('./jsons_plotly/sum_99/AmericaN.json',this)" type="button" class="btn btn-outline-primary" id="btnAmN">North America</button>
                    <button onclick="myFunction('./jsons_plotly/sum_99/AmericaS.json',this)" type="button" class="btn btn-outline-primary" id="btnAmS">South America</button>
                    <button onclick="myFunction('./jsons_plotly/sum_99/Asia1.json',this)" type="button" class="btn btn-outline-primary" id="btnAs1">Asia 1</button>
                    <button onclick="myFunction('./jsons_plotly/sum_99/Asia2.json',this)" type="button" class="btn btn-outline-primary" id="btnAs2">Asia 2</button>
                    <button onclick="myFunction('./jsons_plotly/sum_99/Asia3.json',this)" type="button" class="btn btn-outline-primary" id="btnAs3">Asia 3</button>
                    <button onclick="myFunction('./jsons_plotly/sum_99/Oceania1.json',this)" type="button" class="btn btn-outline-primary" id="btnOc1">Oceania 1</button>
                    <button onclick="myFunction('./jsons_plotly/sum_99/Oceania2.json',this)" type="button" class="btn btn-outline-primary" id="btnOc2">Oceania 2</button>
                    <button onclick="myFunction_reset_view('./jsons_plotly/sum_99/scatter.json',this)" type="button" class="btn btn-outline-primary" id="btnRset">Reset View</button>
                </div>
                <div class="row p-4" style="justify-content: center;flex-wrap: wrap;">
                    <p style="text-align: center;"> HOLD THE PLOTS</p>
                    <div class="col-2 button-wrapper">
                        <!-- Rounded switch -->
                        <label class="switch3" >
                            <input type="checkbox" id="holdSwitch"/>
                            <div class="ball"></div>
                        </label>
                    </div>
                </div>
            </div>
            </div>
        </div>
    </div>

    <!-- plotly CDN -->


    <!-- END OF THE REAL INDEX Content-->
    
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <!-- MathJax3 -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>
      AOS.init({
        offset: 400,
        duration: 1000
      });
     
    </script>
  
</body>

<script src="./js/day-night-js.js"></script>
<!-- LOADING THE NAV BAR NEED THE QUERY OF JS -->
<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
<script type="text/javascript" src="./js/navbar-js.js"></script>
<!-- <script type="text/javascript" src="./js/common-layout.js"></script> -->

</html>

